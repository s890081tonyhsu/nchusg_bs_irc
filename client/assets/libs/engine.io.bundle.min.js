!function(){function e(t,n,i){var s=e.resolve(t);if(null==s){i=i||t,n=n||"root";var a=new Error('Failed to require "'+i+'" from "'+n+'"');throw a.path=i,a.parent=n,a.require=!0,a}var o=e.modules[s];return o.exports||(o.exports={},o.client=o.component=!0,o.call(this,o.exports,e.relative(s),o)),o.exports}e.modules={},e.aliases={},e.resolve=function(t){"/"===t.charAt(0)&&(t=t.slice(1));for(var n=t+"/index.js",i=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"],s=0;s<i.length;s++){var t=i[s];if(e.modules.hasOwnProperty(t))return t}return e.aliases.hasOwnProperty(n)?e.aliases[n]:void 0},e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/"),t=t.split("/");for(var i=0;i<t.length;++i)".."==t[i]?e.pop():"."!=t[i]&&""!=t[i]&&n.push(t[i]);return e.concat(n).join("/")},e.register=function(t,n){e.modules[t]=n},e.alias=function(t,n){if(!e.modules.hasOwnProperty(t))throw new Error('Failed to alias "'+t+'", it does not exist');e.aliases[n]=t},e.relative=function(t){function n(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function i(n){var s=i.resolve(n);return e(s,t,n)}var s=e.normalize(t,"..");return i.resolve=function(i){var a=i.charAt(0);if("/"==a)return i.slice(1);if("."==a)return e.normalize(s,i);var o=t.split("/"),r=n(o,"deps")+1;return r||(r=0),i=o.slice(0,r+1).join("/")+"/deps/"+i},i.exists=function(t){return e.modules.hasOwnProperty(i.resolve(t))},i},e.register("component-emitter/index.js",function(e,t,n){function i(e){return e?s(e):void 0}function s(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}n.exports=i,i.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},t._off=n,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var i=n.indexOf(t._off||t);return~i&&n.splice(i,1),this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,s=n.length;s>i;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),e.register("component-indexof/index.js",function(e,t,n){var i=[].indexOf;n.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}}),e.register("LearnBoost-engine.io-protocol/lib/index.js",function(e,t){var n=t("./keys");e.protocol=2;var i=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=n(i),a={type:"error",data:"parser error"};e.encodePacket=function(e){var t=i[e.type];return void 0!==e.data&&(t+=String(e.data)),""+t},e.decodePacket=function(e){var t=e.charAt(0);return Number(t)==t&&s[t]?e.length>1?{type:s[t],data:e.substring(1)}:{type:s[t]}:a},e.encodePayload=function(t){if(!t.length)return"0:";for(var n,i="",s=0,a=t.length;a>s;s++)n=e.encodePacket(t[s]),i+=n.length+":"+n;return i},e.decodePayload=function(t,n){var i;if(""==t)return n(a,0,1);for(var s,o,r="",c=0,l=t.length;l>c;c++){var h=t.charAt(c);if(":"!=h)r+=h;else{if(""==r||r!=(s=Number(r)))return n(a,0,1);if(o=t.substr(c+1,s),r!=o.length)return n(a,0,1);if(o.length){if(i=e.decodePacket(o),a.type==i.type&&a.data==i.data)return n(a,0,1);var p=n(i,c+s,l);if(!1===p)return}c+=s,r=""}}return""!=r?n(a,0,1):void 0}}),e.register("LearnBoost-engine.io-protocol/lib/keys.js",function(e,t,n){n.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}}),e.register("visionmedia-debug/index.js",function(e,t,n){n.exports="undefined"==typeof window?t("./lib/debug"):t("./debug")}),e.register("visionmedia-debug/debug.js",function(e,t,n){function i(e){return i.enabled(e)?function(t){t=s(t);var n=new Date,a=n-(i[e]||n);i[e]=n,t=e+" "+t+" +"+i.humanize(a),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function s(e){return e instanceof Error?e.stack||e.message:e}n.exports=i,i.names=[],i.skips=[],i.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),s=n.length,a=0;s>a;a++)e=n[a].replace("*",".*?"),"-"===e[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$"))},i.disable=function(){i.enable("")},i.humanize=function(e){var t=1e3,n=6e4,i=60*n;return e>=i?(e/i).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(0|e/t)+"s":e+"ms"},i.enabled=function(e){for(var t=0,n=i.skips.length;n>t;t++)if(i.skips[t].test(e))return!1;for(var t=0,n=i.names.length;n>t;t++)if(i.names[t].test(e))return!0;return!1},window.localStorage&&i.enable(localStorage.debug)}),e.register("engine.io/lib/index.js",function(e,t,n){n.exports=t("./socket"),n.exports.parser=t("engine.io-parser")}),e.register("engine.io/lib/socket.js",function(e,t,n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},"object"==typeof e&&(t=e,e=null),e&&(e=a.parseUri(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:p.location&&"https:"==location.protocol,t.host){var n=t.host.split(":");t.hostname=n.shift(),n.length&&(t.port=n.pop())}this.hostname=t.hostname||(p.location?location.hostname:"localhost"),this.port=t.port||(p.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=a.qsParse(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.timestampParam=t.timestampParam||"t",this.timestampRequests=!!t.timestampRequests,this.flashPath=t.flashPath||"",this.transports=t.transports||["polling","websocket","flashsocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.open(),i.sockets.push(this),i.sockets.evs.emit("add",this)}function s(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var a=t("./util"),o=t("./transports"),r=t("./emitter"),c=t("debug")("engine-client:socket"),l=t("indexof"),h=t("engine.io-parser");n.exports=i;var p=a.global();r(i.prototype),i.protocol=h.protocol,i.sockets=[],i.sockets.evs=new r,i.Socket=i,i.Transport=t("./transport"),i.Emitter=t("./emitter"),i.transports=t("./transports"),i.util=t("./util"),i.parser=t("engine.io-parser"),i.prototype.createTransport=function(e){c('creating transport "%s"',e);var t=s(this.query);t.EIO=h.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,flashPath:this.flashPath,policyPort:this.policyPort});return n},i.prototype.open=function(){this.readyState="opening";var e=this.createTransport(this.transports[0]);e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){var t=this;this.transport&&(c("clearing existing transport"),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(t){if(!i){i=!0;var a=new Error("probe error: "+t);a.transport=n.name,n.close(),n=null,c('probe transport "%s" failed because of error: %s',e,t),s.emit("error",a)}}c('probing transport "%s"',e);var n=this.createTransport(e,{probe:1}),i=!1,s=this;n.once("open",function(){i||(c('probe transport "%s" opened',e),n.send([{type:"ping",data:"probe"}]),n.once("packet",function(a){if(!i)if("pong"==a.type&&"probe"==a.data)c('probe transport "%s" pong',e),s.upgrading=!0,s.emit("upgrading",n),c('pausing current transport "%s"',s.transport.name),s.transport.pause(function(){i||"closed"!=s.readyState&&"closing"!=s.readyState&&(c("changing transport and sending upgrade packet"),n.removeListener("error",t),s.emit("upgrade",n),s.setTransport(n),n.send([{type:"upgrade"}]),n=null,s.upgrading=!1,s.flush())});else{c('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=n.name,s.emit("error",o)}}))}),n.once("error",t),n.open(),this.once("close",function(){n&&(c("socket closed prematurely - aborting probe"),i=!0,n.close(),n=null)}),this.once("upgrading",function(e){n&&e.name!=n.name&&(c('"%s" works - aborting "%s"',e.name,n.name),n.close(),n=null)})},i.prototype.onOpen=function(){if(c("socket open"),this.readyState="open",this.emit("open"),this.onopen&&this.onopen.call(this),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){c("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(c('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(a.parseJSON(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data);var n={data:e.data};n.toString=function(){return e.data},this.onmessage&&this.onmessage.call(this,n)}else c('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat)},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){c("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,n){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(n),this.flush()},i.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.onClose("forced close"),c("socket closing - telling transport to close"),this.transport.close()),this},i.prototype.onError=function(e){c("socket error %j",e),this.emit("error",e),this.onerror&&this.onerror.call(this,e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState){c('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[]},0),this.transport.removeAllListeners();var i=this.readyState;this.readyState="closed",this.id=null,"open"==i&&(this.emit("close",e,t),this.onclose&&this.onclose.call(this))}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;i>n;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}),e.register("engine.io/lib/transport.js",function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState=""}var s=(t("./util"),t("engine.io-parser")),a=t("./emitter");n.exports=i,a(i.prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){this.onPacket(s.decodePacket(e))},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}}),e.register("engine.io/lib/emitter.js",function(e,t,n){var i=t("emitter");n.exports=i,i.prototype.addEventListener=i.prototype.on,i.prototype.removeEventListener=i.prototype.off,i.prototype.removeListener=i.prototype.off}),e.register("engine.io/lib/util.js",function(e,t){var n=!1;e.global=function(){return"undefined"!=typeof window?window:global},e.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},e.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t},e.on=function(e,t,n,i){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,i)},e.load=function(t){var i=e.global();return i.document&&"complete"===document.readyState||n?t():(e.on(i,"load",t,!1),void 0)},"undefined"!=typeof window&&e.load(function(){n=!0}),e.defer=function(t){return e.ua.webkit&&"undefined"==typeof importScripts?(e.load(function(){setTimeout(t,100)}),void 0):t()};var i=/^[\],:{}\s]*$/,s=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,a=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,r=/^\s+/,c=/\s+$/;e.parseJSON=function(t){var n=e.global();return"string"==typeof t&&t?(t=t.replace(r,"").replace(c,""),n.JSON&&JSON.parse?JSON.parse(t):i.test(t.replace(s,"@").replace(a,"]").replace(o,""))?new Function("return "+t)():void 0):null},e.ua={},e.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){var e;try{e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),e.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),e.ua.gecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent),e.ua.android="undefined"!=typeof navigator&&/android/i.test(navigator.userAgent),e.ua.ios="undefined"!=typeof navigator&&/^(iPad|iPhone|iPod)$/.test(navigator.platform),e.ua.ios6=e.ua.ios&&/OS 6_/.test(navigator.userAgent),e.request=function(n){try{var i=t("xmlhttprequest").XMLHttpRequest;return new i}catch(s){}if(n&&"undefined"!=typeof XDomainRequest&&!e.ua.hasCORS)return new XDomainRequest;try{if("undefined"!=typeof XMLHttpRequest&&(!n||e.ua.hasCORS))return new XMLHttpRequest}catch(s){}if(!n)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(s){}};var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,h=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.parseUri=function(e){for(var t=l.exec(e||""),n={},i=14;i--;)n[h[i]]=t[i]||"";return n},e.qs=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},e.qsParse=function(e){for(var t={},n=e.split("&"),i=0,s=n.length;s>i;i++){var a=n[i].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}}),e.register("engine.io/lib/transports/index.js",function(e,t){function n(e){var t,n=!1,a=!1;if(c.location){var o="https:"==location.protocol,l=location.port;Number(l)!==l&&(l=o?443:80),n=e.hostname!=location.hostname||l!=e.port,a=e.secure!=o}return t=r.request(n),a&&c.XDomainRequest&&t instanceof c.XDomainRequest?new s(e):t&&!e.forceJSONP?new i(e):new s(e)}var i=t("./polling-xhr"),s=t("./polling-jsonp"),a=t("./websocket"),o=t("./flashsocket"),r=t("../util");e.polling=n,e.websocket=a,e.flashsocket=o;var c=r.global()}),e.register("engine.io/lib/transports/polling.js",function(e,t,n){function i(e){s.call(this,e)}var s=t("../transport"),a=t("../util"),o=t("engine.io-parser"),r=t("debug")("engine.io-client:polling");n.exports=i;var c=a.global();a.inherits(i,s),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){r("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(r("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){r("pre-pause polling complete"),--i||t()})),this.writable||(r("we are currently writing - waiting to pause"),i++,this.once("drain",function(){r("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){r("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;r("polling got data %s",e),o.decodePayload(e,function(e){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):(t.onPacket(e),void 0)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():r('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){r("writing close packet"),t.write([{type:"close"}])}var t=this;this.open?(r("transport open - closing"),e()):(r("transport not open - defering close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1,this.doWrite(o.encodePayload(e),function(){t.writable=!0,t.emit("drain")})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return(c.ActiveXObject||a.ua.android||a.ua.ios6||this.timestampRequests)&&(e[this.timestampParam]=+new Date),e=a.qs(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}}),e.register("engine.io/lib/transports/polling-xhr.js",function(e,t,n){function i(){}function s(e){if(o.call(this,e),h.location){var t="https:"==location.protocol,n=location.port;Number(n)!==n&&(n=t?443:80),this.xd=e.hostname!=h.location.hostname||n!=e.port}}function a(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.create()}var o=t("./polling"),r=t("../util"),c=t("../emitter"),l=t("debug")("engine.io-client:polling-xhr");n.exports=s,n.exports.Request=a;var h=r.global(),p=h[["Active"].concat("Object").join("X")];r.inherits(s,o),s.prototype.doOpen=function(){var e=this;r.defer(function(){o.prototype.doOpen.call(e)})},s.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,new a(e)},s.prototype.doWrite=function(e,t){var n=this.request({method:"POST",data:e}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},s.prototype.doPoll=function(){l("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(a.prototype),a.prototype.create=function(){var e=this.xhr=r.request(this.xd),t=this;if(e.open(this.method,this.uri,this.async),"POST"==this.method)try{e.setRequestHeader?e.setRequestHeader("Content-type","text/plain;charset=UTF-8"):e.contentType="text/plain"}catch(n){}this.xd&&h.XDomainRequest&&e instanceof XDomainRequest?(e.onerror=function(e){t.onError(e)},e.onload=function(){t.onData(e.responseText)},e.onprogress=i):("withCredentials"in e&&(e.withCredentials=!0),e.onreadystatechange=function(){var n;try{if(4!=e.readyState)return;200==e.status||1223==e.status?n=e.responseText:t.onError(e.status)}catch(i){t.onError(i)}void 0!==n&&t.onData(n)}),l("sending xhr with url %s | data %s",this.uri,this.data),e.send(this.data),p&&(this.index=a.requestsCount++,a.requests[this.index]=this)},a.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},a.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},a.prototype.onError=function(e){this.emit("error",e),this.cleanup()},a.prototype.cleanup=function(){if("undefined"!=typeof this.xhr){this.xhr.onreadystatechange=i,this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}p&&delete a.requests[this.index],this.xhr=null}},a.prototype.abort=function(){this.cleanup()},p&&(a.requestsCount=0,a.requests={},h.attachEvent("onunload",function(){for(var e in a.requests)a.requests.hasOwnProperty(e)&&a.requests[e].abort()}))}),e.register("engine.io/lib/transports/polling-jsonp.js",function(e,t,n){function i(e){s.call(this,e),o||(r.___eio||(r.___eio=[]),o=r.___eio),this.index=o.length;var t=this;o.push(function(e){t.onData(e)}),this.query.j=this.index}var s=t("./polling"),a=t("../util");n.exports=i;var o,r=a.global(),c=/\n/g;a.inherits(i,s),i.prototype.doOpen=function(){var e=this;a.defer(function(){s.prototype.doOpen.call(e)})},i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null),s.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t,a.ua.gecko&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+s.iframeId+'">';a=document.createElement(t)}catch(e){a=document.createElement("iframe"),a.name=s.iframeId,a.src="javascript:0"}a.id=s.iframeId,s.form.appendChild(a),s.iframe=a}var s=this;if(!this.form){var a,o=document.createElement("form"),r=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=l,o.method="POST",o.setAttribute("accept-charset","utf-8"),r.name="d",o.appendChild(r),document.body.appendChild(o),this.form=o,this.area=r}this.form.action=this.uri(),i(),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==s.iframe.readyState&&n()}:this.iframe.onload=n}}),e.register("engine.io/lib/transports/websocket.js",function(e,t,n){function i(e){a.call(this,e)}function s(){return"undefined"==typeof window?t("ws"):c.WebSocket||c.MozWebSocket}var a=t("../transport"),o=t("engine.io-parser"),r=t("../util");t("debug")("engine.io-client:websocket"),n.exports=i;var c=r.global();r.inherits(i,a),i.prototype.name="websocket",i.prototype.doOpen=function(){if(this.check()){var e=this;this.socket=new(s())(this.uri()),this.socket.onopen=function(){e.onOpen()},this.socket.onclose=function(){e.onClose()},this.socket.onmessage=function(t){e.onData(t.data)},this.socket.onerror=function(t){e.onError("websocket error",t)}}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){a.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var i=0,s=e.length;s>i;i++)this.socket.send(o.encodePacket(e[i]));"bufferedAmount"in this.socket?this.bufferedAmountId=setInterval(function(){0==n.socket.bufferedAmount&&(clearInterval(n.bufferedAmountId),t())},50):setTimeout(t,0)},i.prototype.onClose=function(){clearInterval(this.bufferedAmountId),a.prototype.onClose.call(this)},i.prototype.doClose=function(){"undefined"!=typeof this.socket&&this.socket.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),e=r.qs(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},i.prototype.check=function(){var e=s();return!(!e||"__initialize"in e&&this.name===i.prototype.name)}}),e.register("engine.io/lib/transports/flashsocket.js",function(e,t,n){function i(e){o.call(this,e),this.flashPath=e.flashPath,this.policyPort=e.policyPort}function s(e,t){if(p[e])return t();var n=document.createElement("script"),i=!1;c('loading "%s"',e),n.onload=n.onreadystatechange=function(){if(!i&&!p[e]){var s=n.readyState;s&&"loaded"!=s&&"complete"!=s||(c('loaded "%s"',e),n.onload=n.onreadystatechange=null,i=!0,p[e]=!0,t())}},n.async=1,n.src=e;var s=document.getElementsByTagName("head")[0];s.insertBefore(n,s.firstChild)}function a(e,t){function n(i){return e[i]?(s(e[i],function(){n(++i)}),void 0):t()}n(0)}var o=t("./websocket"),r=t("../util"),c=t("debug")("engine.io-client:flashsocket");n.exports=i;var l=r.global(),h=l[["Active"].concat("Object").join("X")];r.inherits(i,o),i.prototype.name="flashsocket",i.prototype.doOpen=function(){function e(e){return function(){var t=Array.prototype.join.call(arguments," ");c("[websocketjs %s] %s",e,t)}}if(this.check()){WEB_SOCKET_LOGGER={log:e("debug"),error:e("error")},WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0,WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0,"undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=this.flashPath+"WebSocketMainInsecure.swf");var t=[this.flashPath+"web_socket.js"];"undefined"==typeof swfobject&&t.unshift(this.flashPath+"swfobject.js");var n=this;a(t,function(){n.ready(function(){WebSocket.__addTask(function(){o.prototype.doOpen.call(n)})})})}},i.prototype.doClose=function(){if(this.socket){var e=this;WebSocket.__addTask(function(){o.prototype.doClose.call(e)})}},i.prototype.write=function(){var e=this,t=arguments;WebSocket.__addTask(function(){o.prototype.write.apply(e,t)})},i.prototype.ready=function(e){function t(){i.loaded||(843!=n.policyPort&&WebSocket.loadFlashPolicyFile("xmlsocket://"+n.host+":"+n.policyPort),WebSocket.__initialize(),i.loaded=!0),e.call(n)}if("undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject&&!(swfobject.getFlashPlayerVersion().major<10)){var n=this;return document.body?t():(r.load(t),void 0)}},i.prototype.check=function(){if("undefined"==typeof window)return!1;if("undefined"!=typeof WebSocket&&!("__initialize"in WebSocket))return!1;if(h){var e=null;try{e=new h("ShockwaveFlash.ShockwaveFlash")}catch(t){}if(e)return!0}else for(var n=0,i=navigator.plugins.length;i>n;n++)for(var s=0,a=navigator.plugins[n].length;a>s;s++)if("Shockwave Flash"==navigator.plugins[n][s].description)return!0;return!1};var p={}}),e.alias("component-emitter/index.js","engine.io/deps/emitter/index.js"),e.alias("component-emitter/index.js","emitter/index.js"),e.alias("component-indexof/index.js","engine.io/deps/indexof/index.js"),e.alias("component-indexof/index.js","indexof/index.js"),e.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io/deps/engine.io-parser/lib/index.js"),e.alias("LearnBoost-engine.io-protocol/lib/keys.js","engine.io/deps/engine.io-parser/lib/keys.js"),e.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io/deps/engine.io-parser/index.js"),e.alias("LearnBoost-engine.io-protocol/lib/index.js","engine.io-parser/index.js"),e.alias("LearnBoost-engine.io-protocol/lib/index.js","LearnBoost-engine.io-protocol/index.js"),e.alias("visionmedia-debug/index.js","engine.io/deps/debug/index.js"),e.alias("visionmedia-debug/debug.js","engine.io/deps/debug/debug.js"),e.alias("visionmedia-debug/index.js","debug/index.js"),e.alias("engine.io/lib/index.js","engine.io/index.js"),"object"==typeof exports?module.exports=e("engine.io"):"function"==typeof define&&define.amd?define(function(){return e("engine.io")}):this.eio=e("engine.io")}();var EngineioTools={ReconnectingSocket:function(e,t){function n(){c=!0,l=!1,f=!1,g=0,p=0,clearTimeout(m)}function i(){c=!1,f||o()}function s(){l&&o()}function a(){f=!0,r.call(v)}function o(){if(g>=u)return v.emit("reconnecting_failed"),void 0;var e=d?2*(p||h/2):h*g;l=!0,m=setTimeout(function(){v.open()},e),p=e,v.emit("reconnecting",{attempt:g+1,max_attempts:u,delay:e}),g++}var r,c=!1,l=!1,h=2e3,p=0,d=!0,u=5,g=0,m=null,f=!1,v=eio.apply(eio,arguments);return v.on("open",n),v.on("close",i),v.on("error",s),r=v.close,v.close=a,t&&("number"==typeof t.reconnect_delay&&(h=t.reconnect_delay),"number"==typeof t.reconnect_max_attempts&&(u=t.reconnect_max_attempts),"undefined"!=typeof t.reconnect_delay_exponential&&(d=!!t.reconnect_delay_exponential)),v},Rpc:function(){function e(e){this._next_id=0,this._rpc_callbacks={},this._socket=e,this._mixinEmitter(),this._bindSocketListeners()}return e.prototype._bindSocketListeners=function(){var e=this;this._onMessageProxy=function(){e._onMessage.apply(e,arguments)},this._socket.on("message",this._onMessageProxy)},e.prototype.dispose=function(){this._onMessageProxy&&(this._socket.removeListener("message",this._onMessageProxy),delete this._onMessageProxy),this.removeAllListeners()},e.prototype._mixinEmitter=function(){for(var e=["on","once","off","removeListener","removeAllListeners","emit","listeners","hasListeners"],t=0;t<e.length;t++)"function"==typeof this._socket[e[t]]&&(this[e[t]]=this._socket[e[t]])},e.prototype._isCall=function(e){return"undefined"!=typeof e.method&&"undefined"!=typeof e.params},e.prototype._isResponse=function(e){return"undefined"!=typeof e.id&&"undefined"!=typeof e.response},e.prototype.call=function(e){var t,n,i;t=Array.prototype.slice.call(arguments,1,arguments.length),"function"==typeof t[t.length-1]&&(n=t[t.length-1],t=t.slice(0,t.length-1)),i={method:e,params:t},"function"==typeof n&&(i.id=this._next_id,this._next_id++,this._rpc_callbacks[i.id]=n),this.send(i)},e.prototype.send=function(e){this._socket&&this._socket.send(JSON.stringify(e))},e.prototype._onMessage=function(e){var t,n,i;try{if(t=JSON.parse(e),!t)throw"Corrupt packet"}catch(s){return}if(this._isResponse(t)){if("function"!=typeof this._rpc_callbacks[t.id])return;i=this._rpc_callbacks[t.id],delete this._rpc_callbacks[t.id],i.apply(this,t.response)}else this._isCall(t)&&(n="undefined"!=typeof t.id?this._createReturnCallFn(t.id):this._noop,this.emit.apply(this,[t.method,n].concat(t.params)))},e.prototype._createReturnCallFn=function(e){var t=this;return function(){var n=Array.prototype.slice.call(arguments,0),i={id:e,response:n};t.send(i)}},e.prototype._noop=function(){},e}()};